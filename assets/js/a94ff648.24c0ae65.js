"use strict";(self.webpackChunkdevyuseon_github_io=self.webpackChunkdevyuseon_github_io||[]).push([[540],{748:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>t,toc:()=>r});var c=s(7624),l=s(4552);const i={title:"json\uc744 \ub2e4\ud615\uc131 \uc801\uc6a9\ub41c \ud074\ub798\uc2a4\ub85c \uc5ed\uc9c1\ub82c\ud654 \ud558\uae30",description:"jackson\uc73c\ub85c json \uc5ed\uc9c1\ub82c\ud654\uc2dc \ud544\ub4dc \uac12\uc73c\ub85c \ub9e4\ud551 \ud0c0\uc785\uc744 \uacb0\uc815\ud558\ub294 \ubc29\ubc95\uc744 \uc54c\uc544\ubcf8\ub2e4.",hide_table_of_contents:!1,toc_max_heading_level:4},o=void 0,t={permalink:"/blog/2024/05/05/deserialize-polymorphism-subclasses",source:"@site/blog/2024-05-05-deserialize-polymorphism-subclasses.md",title:"json\uc744 \ub2e4\ud615\uc131 \uc801\uc6a9\ub41c \ud074\ub798\uc2a4\ub85c \uc5ed\uc9c1\ub82c\ud654 \ud558\uae30",description:"jackson\uc73c\ub85c json \uc5ed\uc9c1\ub82c\ud654\uc2dc \ud544\ub4dc \uac12\uc73c\ub85c \ub9e4\ud551 \ud0c0\uc785\uc744 \uacb0\uc815\ud558\ub294 \ubc29\ubc95\uc744 \uc54c\uc544\ubcf8\ub2e4.",date:"2024-05-05T00:00:00.000Z",formattedDate:"May 5, 2024",tags:[],readingTime:5.47,hasTruncateMarker:!0,authors:[],frontMatter:{title:"json\uc744 \ub2e4\ud615\uc131 \uc801\uc6a9\ub41c \ud074\ub798\uc2a4\ub85c \uc5ed\uc9c1\ub82c\ud654 \ud558\uae30",description:"jackson\uc73c\ub85c json \uc5ed\uc9c1\ub82c\ud654\uc2dc \ud544\ub4dc \uac12\uc73c\ub85c \ub9e4\ud551 \ud0c0\uc785\uc744 \uacb0\uc815\ud558\ub294 \ubc29\ubc95\uc744 \uc54c\uc544\ubcf8\ub2e4.",hide_table_of_contents:!1,toc_max_heading_level:4},unlisted:!1,prevItem:{title:"Java\uc5d0\uc11c new String()\uc73c\ub85c \uc778\ucf54\ub529\uc744 \ubcc0\ud658 \ud560 \uc218\ub294 \uc5c6\ub2e4.",permalink:"/blog/2024/05/22/java-new-string-encoding"},nextItem:{title:"Process.waitFor() \uc774 \uc601\uc6d0\ud788 \ub05d\ub098\uc9c0 \uc54a\ub294\ub2e4.",permalink:"/blog/2024/04/08/Process.waitfor-dealock-occur"}},a={authorsImageUrls:[]},r=[{value:"\ud074\ub798\uc2a4 \uad6c\uc870",id:"\ud074\ub798\uc2a4-\uad6c\uc870",level:2},{value:"\ub9e4\ud551 \ud0c0\uc785\uc744 \uc9c0\uc815\ud558\uc9c0 \uc54a\uc558\uc744 \ub54c",id:"\ub9e4\ud551-\ud0c0\uc785\uc744-\uc9c0\uc815\ud558\uc9c0-\uc54a\uc558\uc744-\ub54c",level:2},{value:"@JsonTypeInfo\uacfc @JsonSubTypes",id:"jsontypeinfo\uacfc-jsonsubtypes",level:2},{value:"\ub9c8\uce58\uba70",id:"\ub9c8\uce58\uba70",level:2}];function d(e){const n={admonition:"admonition",code:"code",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.M)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.p,{children:"\ub2e4\uc591\ud55c json \uad6c\uc870\ub97c \ub2e4\ud615\uc131\uc744 \uc801\uc6a9\ud55c (\uc778\ud130\ud398\uc774\uc2a4, \uc0c1\uc18d ...) \uc790\ubc14 \uac1d\uccb4\ub85c \uc5ed\uc9c1\ub82c\ud654 \ud558\uae30!"}),"\n",(0,c.jsx)(n.admonition,{type:"info",children:(0,c.jsxs)(n.p,{children:["\uc774\ud574\ub97c \ub3d5\uae30 \uc704\ud574 \uc800\uc758 \uc0c1\ud669\uc744 \uc124\uba85\ud574 \ub193\uc558\uc73c\ub098, \uc774 \uacbd\uc6b0\uac00 \uc544\ub2c8\ub354\ub77c\ub3c4 ",(0,c.jsx)(n.strong,{children:"Jackson"}),"\uc744 \uc0ac\uc6a9\ud558\ub294 \ubaa8\ub4e0 \uacf3\uc5d0 \uc801\uc6a9 \uac00\ub2a5\ud55c \ubc29\ubc95\uc785\ub2c8\ub2e4. :)"]})}),"\n",(0,c.jsx)(n.h2,{id:"\ud074\ub798\uc2a4-\uad6c\uc870",children:"\ud074\ub798\uc2a4 \uad6c\uc870"}),"\n",(0,c.jsxs)(n.p,{children:["opensearch(\u2252elasticsearch) \uc778\ub371\uc2a4 \ub9e4\ud551\uc774 dynamic\uc73c\ub85c \ub418\uc5b4 \uc788\uace0, type\ubcc4\ub85c json \uad6c\uc870\uac00 \ub2ec\ub790\uc2b5\ub2c8\ub2e4. \uae30\uc874 \ucf54\ub4dc\ub294 HashMap\uc73c\ub85c \uc77d\uc740 \ub2e4\uc74c ",(0,c.jsx)(n.code,{children:".get().get()..."})," \ud558\ub294 \uad6c\uc870\ub85c \ub418\uc5b4 \uc788\uc5c8\uc2b5\ub2c8\ub2e4\ud83e\udd72."]}),"\n",(0,c.jsx)(n.p,{children:"\ud574\uacb0\ubc95\uc774 \uc788\uc744 \uac70\ub77c \uad73\uac8c \ubbff\uace0, draw.io\ub97c \ucf1c \uc57c\uc2ec\ucc28\uac8c \uc778\ud130\ud398\uc774\uc2a4\uc640 \ucd94\uc0c1\ud074\ub798\uc2a4\ub85c \uc544\ub798 \uad6c\uc870\ub85c \ucd94\uc0c1\ud654\ub97c \ud574\ubcf4\uc558\uc2b5\ub2c8\ub2e4. (\ud68c\uc0ac \ucf54\ub4dc\ub97c \uac00\uc838\uc62c \uc218 \uc5c6\uc5b4 \ud074\ub798\uc2a4 \uc774\ub984\uc740 \uc784\uc758\ub85c \uc815\ud588\uc2b5\ub2c8\ub2e4.)"}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.img,{src:s(9408).c+"",width:"574",height:"496"})}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"opensearch-java"})," \ub77c\uc774\ube0c\ub7ec\ub9ac\ub97c \uc0ac\uc6a9\ud574\uc11c \ub2e4\uc74c\uacfc \uac19\uc774 response\ub97c \uc9c0\uc815\ud55c \ud074\ub798\uc2a4\ub85c \uc5ed\uc9c1\ub82c\ud654 \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-java",children:"SearchResponse<IndexData> searchResponse = client.search(s -> s.index(index), IndexData.class);\n"})}),"\n",(0,c.jsxs)(n.p,{children:["opensearch-java\ub294 \ub0b4\ubd80\uc801\uc73c\ub85c ",(0,c.jsx)(n.strong,{children:"jackson"})," \ub77c\uc774\ube0c\ub7ec\ub9ac\ub97c \uc0ac\uc6a9\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,c.jsx)(n.p,{children:"\ud574\uacb0\ubc95\uc740 \uc758\uc678\ub85c \uac04\ub2e8\ud588\ub294\ub370\uc694, Jackson\uc5d0\uc11c \uc81c\uacf5\ud558\ub294 \uc5b4\ub178\ud14c\uc774\uc158\uc73c\ub85c \uc11c\ube0c \ud0c0\uc785\uc744 \ub9e4\ud551\ud558\uba74 \ub429\ub2c8\ub2e4."}),"\n",(0,c.jsx)(n.h2,{id:"\ub9e4\ud551-\ud0c0\uc785\uc744-\uc9c0\uc815\ud558\uc9c0-\uc54a\uc558\uc744-\ub54c",children:"\ub9e4\ud551 \ud0c0\uc785\uc744 \uc9c0\uc815\ud558\uc9c0 \uc54a\uc558\uc744 \ub54c"}),"\n",(0,c.jsx)(n.p,{children:"\uc77c\ub2e8 \uc544\ubb34\ub7f0 \uc870\uce58\ub97c \ud558\uc9c0 \uc54a\uc558\uc744 \ub54c, \uc5b4\ub5a4 \uc77c\uc774 \uc77c\uc5b4\ub098\ub294\uc9c0 \uc0b4\ud3b4\ubd05\uc2dc\ub2e4. \uc544\ub798\uc640 \uac19\uc740 json\uc744 Document.class\ub85c \uc5ed\uc9c1\ub82c\ud654 \ud574\ubcf4\uaca0\uc2b5\ub2c8\ub2e4."}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-json",children:'{\n  "policies": [\n    {\n      "type": "a"\n    },\n    {\n      "type": "b"\n    },\n    {\n      "type": "c"\n    }\n  ]\n}\n'})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-java",children:'ObjectMapper objectMapper = new ObjectMapper();\nString json = "{\\"policies\\":[{\\"type\\":\\"a\\"},{\\"type\\":\\"b\\"},{\\"type\\":\\"c\\"}]}";\nDocument document = objectMapper.readValue(json, Document.class);\n'})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-java",children:"com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Cannot construct instance of `hello.jsontest.classes.Policy` (no Creators, like default constructor, exist): abstract types either need to be mapped to concrete types, have custom deserializer, or contain additional type information\n"})}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"InvalidDefinitionException"})," \uc774 \ud130\uc9d1\ub2c8\ub2e4. \uc815\ud655\ud55c \ud0c0\uc785\uc744 \uc9c0\uc815\ud574\uc8fc\uac70\ub098 \ucd94\uac00 \uc815\ubcf4\ub97c \uc81c\uacf5\ud574\uc8fc\ub77c\uace0 \ud558\ub124\uc694."]}),"\n",(0,c.jsx)(n.p,{children:"Jackson\uc774 \uc81c\uacf5\ud558\ub294 \uc5b4\ub178\ud14c\uc774\uc158\uc73c\ub85c \ud0c0\uc785\uc744 \uc9c0\uc815\ud558\ub294 \ubc29\ubc95\uc744 \uc54c\uc544\ubd05\uc2dc\ub2e4."}),"\n",(0,c.jsx)(n.h2,{id:"jsontypeinfo\uacfc-jsonsubtypes",children:"@JsonTypeInfo\uacfc @JsonSubTypes"}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"@JsonTypeInfo"}),"\ub294 \uc11c\ube0c \ud0c0\uc785\uc744 \uc5b4\ub5a4 \uc815\ubcf4\ub97c \uc0ac\uc6a9\ud574 \uc9c0\uc815\ud560 \uac83\uc778\uc9c0 \uc815\ud574\uc8fc\ub294 \uc5b4\ub178\ud14c\uc774\uc158,",(0,c.jsx)("br",{}),"\n",(0,c.jsx)(n.code,{children:"@JsonSubTypes"}),"\ub294 \uc2e4\uc81c \uc11c\ube0c\ud0c0\uc785\uc744 \uc5b4\ub5a4 \ud074\ub798\uc2a4\ub85c \uc9c0\uc815\ud560 \uac83\uc778\uc9c0 \uc815\ud574\uc8fc\ub294 \uc5b4\ub178\ud14c\uc774\uc158 \uc785\ub2c8\ub2e4."]}),"\n",(0,c.jsx)(n.p,{children:"\uc704 \ud074\ub798\uc2a4 \uad6c\uc870\uc5d0\uc11c, Policy \ud074\ub798\uc2a4\uc5d0 \ub9e4\ud551 \uc815\ubcf4\ub97c \uc815\uc758\ud558\ub824\uba74 \uc774\ub807\uac8c \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-java",children:'@JsonTypeInfo(use = Id.NAME, include = As.EXISTING_PROPERTY, property = "type")\n@JsonSubTypes({\n        @JsonSubTypes.Type(value = APolicy.class, name = "a"),\n        @JsonSubTypes.Type(value = BPolicy.class, name = "b"),\n        @JsonSubTypes.Type(value = CPolicy.class, name = "c")\n})\npublic interface Policy {\n}\n'})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-java",children:'ObjectMapper objectMapper = new ObjectMapper();\nString json = "{\\"policies\\":[{\\"type\\":\\"a\\"},{\\"type\\":\\"b\\"},{\\"type\\":\\"c\\"}]}";\nDocument document = objectMapper.readValue(json, Document.class);\nSystem.out.println("document.getPolicies().get(0).getClass() = " + document.getPolicies().get(0).getClass());\nSystem.out.println("document.getPolicies().get(1).getClass() = " + document.getPolicies().get(1).getClass());\nSystem.out.println("document.getPolicies().get(2).getClass() = " + document.getPolicies().get(2).getClass());\n'})}),"\n",(0,c.jsx)(n.p,{children:"\uc704 \ucf54\ub4dc\ub97c \uc2e4\ud589\ud558\uba74 \ub2e4\uc74c\uacfc \uac19\uc740 \uacb0\uacfc\ub97c \uc5bb\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-java",children:"document.getPolicies().get(0).getClass() = class hello.jsontest.classes.APolicy\ndocument.getPolicies().get(1).getClass() = class hello.jsontest.classes.BPolicy\ndocument.getPolicies().get(2).getClass() = class hello.jsontest.classes.CPolicy\n"})}),"\n",(0,c.jsx)(n.p,{children:"\uc758\ub3c4\ub41c \ub300\ub85c \uc5ed\uc9c1\ub82c\ud654\uac00 \uc798 \ub41c\uac83\uc744 \ubcfc \uc218 \uc788\uc2b5\ub2c8\ub2e4. \ud83d\udc4d"}),"\n",(0,c.jsx)(n.p,{children:"\uc704\uc5d0 \uc801\uc6a9\ub41c \uc635\uc158\uc5d0 \ub300\ud55c \uc124\uba85\uc785\ub2c8\ub2e4."}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"@JsonTypeInfo"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"name\uc774\ub77c\ub294 \ud2b9\uc815 property\ub97c \uc9c0\uc815\ud574 \ud0c0\uc785 \uad6c\ubd84"}),"\n",(0,c.jsx)(n.li,{children:'\uc774\ubbf8 \uc874\uc7ac\ud558\ub294 "type"\uc774\ub77c\ub294 \ud544\ub4dc\ub85c \ud0c0\uc785\uc744 \uad6c\ubd84\ud569\ub2c8\ub2e4.'}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"@JsonSubTypes"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:'"a"\ub77c\ub294 name\uc740 APolicy.class\uc5d0, "b"\ub77c\ub294 name\uc740 BPolicy.class\uc5d0'}),"\n",(0,c.jsx)(n.li,{children:"\uc640 \uac19\uc740 \uad6c\ud604 \uc815\ubcf4\ub97c \ub9e4\ud551\ud574\uc90d\ub2c8\ub2e4."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:'\ub530\ub77c\uc11c Jackson\uc740 "type"\ud544\ub4dc \uac12\uc774 a\ub77c\uba74 APolicy, b\ub77c\uba74 BPolicy\ub97c \ub9e4\ud551\ud560 \uc218 \uc788\uac8c \ub41c \uac83\uc785\ub2c8\ub2e4.'}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"use"}),"\uc5d0\ub294 \uc138 \uc635\uc158\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Id.CLASS"}),": \ud074\ub798\uc2a4 \uba85\uc73c\ub85c \uc11c\ube0c\ud0c0\uc785\uc744 \uad6c\ubd84\ud558\uaca0\ub2e4\ub294 \uc758\ubbf8\uc785\ub2c8\ub2e4.","\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"\uc9c1\ub82c\ud654\uc2dc class \uba85\uc774 json\uc5d0 \ub0a8\uac8c \ub429\ub2c8\ub2e4."}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Id.NAME"}),": \uc704 \uc608\uc2dc\ucc98\ub7fc, \ud2b9\uc815 \ud504\ub85c\ud37c\ud2f0\ub97c name\uc73c\ub85c \uc9c0\uc815\ud574 \uad6c\ubd84\ud569\ub2c8\ub2e4.","\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["include = As.PROPERTY","\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"\uc9c1\ub82c\ud654 \uc2dc type \uc815\ubcf4\uac00 \uc0dd\uc131\ub429\ub2c8\ub2e4."}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["include = As.EXISTING_PROPERTY","\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"\uc9c1\ub82c\ud654 \uc2dc \uae30\uc874 \ud544\ub4dc\ub97c \uc0ac\uc6a9\ud569\ub2c8\ub2e4. (\uc0c8\ub85c\uc6b4 \ud544\ub4dc\uac00 \uc0dd\uc131\ub418\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4)"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Id.DEDUCTION"}),": \uac01\uac01\uc758 \uc11c\ube0c \ud0c0\uc785\uc5d0\uc11c \uad6c\ubd84\ud560\ub9cc\ud55c \ud544\ub4dc\uac00 \uc788\ub2e4\uba74, jackson\uc5d0\uc11c \ucd94\ub860\ud574 \ubcc0\ud658\ud574\uc8fc\ub294 \uc124\uc815\uc785\ub2c8\ub2e4."]}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:"\uac01\uac01\uc758 \uc0c1\ud669\uc5d0 \ub9de\uac8c \uc801\uc6a9\ud574 \uc8fc\uba74 \ub418\uaca0\uc2b5\ub2c8\ub2e4 :)"}),"\n",(0,c.jsx)(n.h2,{id:"\ub9c8\uce58\uba70",children:"\ub9c8\uce58\uba70"}),"\n",(0,c.jsx)(n.p,{children:"\uae30\uc874\uc758 HashMap\uc744 \uc774\uc6a9\ud55c \ucf54\ub4dc\uc5d0\uc11c, \uc790\ubc14\ub2f5\uac8c \ub2e4\ud615\uc131\uc744 \uc720\uc9c0\ud558\uba70 \uc5ed\uc9c1\ub82c\ud654\ub97c \ud560 \uc218 \uc788\uac8c \ub418\uc5b4\uc11c, \ub354\uc6b1 \uae54\ub054\ud558\uace0 \uc720\uc5f0\ud55c \ucf54\ub4dc\ub97c \uc791\uc131\ud560 \uc218 \uc788\uac8c \ub418\uc5c8\uc2b5\ub2c8\ub2e4. \uc5ed\uc2dc \uc548\ub418\ub294 \uac83\uc740 \uc5c6\ub124\uc694..\ud83d\ude1a"})]})}function p(e={}){const{wrapper:n}={...(0,l.M)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(d,{...e})}):d(e)}},9408:(e,n,s)=>{s.d(n,{c:()=>c});const c=s.p+"assets/images/20240505112503-31d5e2175cc9d6d90ab3337dbd04b34d.png"},4552:(e,n,s)=>{s.d(n,{I:()=>t,M:()=>o});var c=s(1504);const l={},i=c.createContext(l);function o(e){const n=c.useContext(i);return c.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:o(e.components),c.createElement(i.Provider,{value:n},e.children)}}}]);